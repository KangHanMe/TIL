## 오늘의 할일

- [v] CLI로 브랜치 생성하기

## CLI로 브랜치 생성 실습하기

- 일반적으로 새로운 기능을 개발할 때, 브랜치를 생성한다. 생성한 브랜치에서 새로운 기능을 개발한다. 기능 개발이 완료 후, [master] 브랜치로 병합한다.
- 아래의 그림에서 브랜치의 흐름을 알아보자.
  ![git_basic_branching](img/git_basic_branching.png)
- 현재 커밋이 C0 ~ C4 까지 있다. 현재 2개의 브랜치가 있다. `[master]` 브랜치와 `[hotfix]`브랜치이다. `git brach` 명령어로 터미널에서 확인 했을 때, `* [master]` 브랜치 확인할 수 있다. `*` 기호가 붙어 있는데, 이 뜻은 현재 작업 중인 브랜치를 뜻한다. 즉, `[HEAD]`를 나타냰다.
- 브랜치는 최신 커밋을 가리키고, 최신 커밋은 부모 커밋을 가리킨다.
- 병합 커밋는 두 개가 존재한다.

## 브랜치의 정보

[출저 도서 팀 개발을 위해 Git, GitHub 시작하기]

- 커밋하면 커밋 객체가 생긴다. 커밋 객체에는 부모 커밋에 대한 참조와 실제 커밋을 구성하는 파일 객체가 들어 있다. (커밋 객체 = 부모 커밋 + 커밋 파일 객체)
- 브랜치는 논리적으로 어떤 커밋과 그 조상들을 묶어서 뜻하지만, 단순히 커밋 객체 하나만 가리킨다. `[master]` 브랜치는 `C4` 커밋 객체 하나만 가리킨다. `[issu53]` 브랜치는 `C3` 커밋 객체 하나만 가리킨다.

## 브랜치를 언제 사용하는가?

- 새로운 기능 추가 : `[master]` 브랜치에 최종적으로 병합하는 경우이다. `[master]` 브랜치의 최신 커밋에서 브랜치를 생성해서 기능 개발을 한다. 그리고 코드 리뷰, 테스트까지 모두 완료해서 이상이 없으면 `[master]` 브랜치로 병합한다.
- 버그 수정 : 오류나 버그가 발생했을 때, `[master]` 브랜치에서 새로운 브랜치를 생성해서 `hotFix`와 `bugFix`같은 이름을 이용한다. 오류나 버그가 끝나면 `[master]` 브랜치에 병합한다.
- 병합과 리베이스 : `git reset` 명령어를 통해 예전 커밋으로 되돌아갈 수 있다. 하지만 안되는 경우도 있다. 그럴 경우 임시 브랜치를 생성하고, 임시 브랜치에서 병합과 리베이스를 한다. 잘못된 경우는 임시 브랜치를 삭제하면 된다.
- 이전 코드 개선 : 이미 기능 구현은 완료되었는데, 코드를 수정 또는 개선하고 싶을 때, 새로운 브랜치를 만들어서 작업을 하고 이전 코드 삭제하면 된다.
- 특정 커밋으로 돌아가고 싶을 떄 : `git reset`명령에서 `hard` 옵션 같은 경우는 커밋이 없어질 수 있기 때문에 브랜치를 생성해서 해당 브랜치에서 작업을 하고 병합이나 리베이스를 한다.

## 브랜치 생성하는 명령어 정리

| 브랜치 명령어                             | 설명                                                                                                                                    |
| ----------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| git branch [-v]                           | 로컬저장소의 브랜치 목록 확인. 추가적으로 원격저장소의 최신 커밋을 표시. 브랜치 앞에 \* 가 있을 경우, HEAD 브랜치를 나타냄              |
| git branch [-f] <브랜치이름> [커밋체크섬] | 새로운 브랜치 생성. 커밋체크셈 값을 주지 않으면 HEAD로부터 브랜치를 생성. 이미 브랜치를 다른 커밋으로 옮기고 싶을 때는 -f 옵션을 줘야함 |
| git branch -r[v]                          | 원격저장소의 브랜치 목록 확인. -v 옵션은 추가하면 로컬저장소의 최신 커밋을 표시                                                         |
| git checkout <브랜치이름>                 | 특정 브랜치로 이동하기. 브랜치이름 대신 커밋 체크섬을 사용 가능. 하지만 브랜치이름을 사용하도록 권장                                    |
| git checkout -b <브랜치이름> <커밋체크섬> | 특정 커밋에서 새로운 브랜치를 생성하고 해당 브랜치로 이동하기(생성 및 이동 동시에)                                                      |
| git merge <대상 브랜치>                   | 현재 브랜치와 대상 브랜치를 병합. 병합 커밋이 생성                                                                                      |
| git rebase <대상 브랜치>                  | 현재 브랜치와 대상 브랜치에 재배치.                                                                                                     |
| git branch -d <브랜치이름>                | 특정 브랜치를 삭제. HEAD 브랜치나 병함이 되지 않은 브랜지는 삭제 할 수 없음                                                             |
| git branch -D <브랜치이름>                | 특정 브랜치를 강제 삭제. -d 로 삭제할 수 없는 브랜치를 지울 수 없는 것을 지울 수 있음                                                   |

## 브랜치 실습하기

- 새로운 브랜치를 생성하기

```sh
$ git branch myBranch1
```

: myBranch1 브랜치 생성

## 추가 정보

- \*master === HEAD -> master
- 프롬프트에 보이는 master === HEAD -> master
- HEAD : 현재 작업 중인 브랜치를 가리킨다.
- 브랜치를 커밋을 가리키므로 HEAD도 커밋을 가리킨다.
- HEAD는 현재 작업 중인 브랜치의 최근 커밋을 가리킨다.
